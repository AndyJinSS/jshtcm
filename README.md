# 江苏省中医院自动预约挂号

> 本仓库仅供学习，请勿用于不法行为。所有行为后果自行承担！
>
> Logger.py 文件未使用，如果有日志记录需求可自行添加
>
> 本人才疏学浅，如有不足之处敬请提出，十分感谢。

## 文件注解

### conf.ini

项目配置文件，需要修改的配置是`username`,`password`,`token`。如果直接使用`token`则无需`username`,`password`。其他配置基本不需要改动。

### main.py

项目主文件，文件内含有两个函数。

1. 预约程序，用来测试是否能够正常预约。运行效果如下。


```shell
欢迎使用ddddocr，本项目专注带动行业内卷，个人博客:wenanzhe.com
训练数据支持来源于:http://146.56.204.113:19199/preview
爬虫框架feapder可快速一键接入，快速开启爬虫之旅：https://github.com/Boris-code/feapder
初始化
获取token成功
success
请选择院区，输入院区前方序号
0):江苏省中医院本部
1):江苏省中医院紫东院区
请输入院区序号：0
成功
请选择科室类别，输入科室类别前方序号
0):名医
1):内科
2):外科
3):妇儿科
4):针推
5):多学科联合门诊
6):医技
7):其他门诊
请输入科室类别序号：4
请选择科室，输入科室前方序号
0):推拿科
1):针灸康复科
2):特色疗法中心
请输入科室序号：0
成功
请选择医生，输入医生前方序号
0):陶琦
1):张仕年
2):耿涛
3):丁育忠
4):于建
5):杨晓仙
6):陈得良
7):刘德华
8):洪伟
9):龚正中
10):程宏亮
11):宋石龙
12):万兴
13):徐士象
14):冯蕴哲
15):桑佳佳
16):推拿科(普号)
17):推拿科穴位贴敷
18):小儿推拿专病门诊(普号)
19):小儿斜颈专病门诊(普号)
请输入医生序号：11
成功
请选择日期，输入日期前方序号
0):2022-07-27
1):2022-07-29
2):2022-08-01
3):2022-08-02
4):2022-08-03
请输入日期序号：4
请选择时段,输入时段前方序号
0):上午
1):下午
请输入时段序号:0
成功
请选择预约时间，输入预约时间前方序号
0):07:50-08:30
1):08:30-09:00
2):09:00-09:30
3):09:30-10:00
4):10:00-10:30
5):10:30-11:00
6):11:00-11:30
请输入预约时间序号：4
成功
请选择就诊卡，输入就诊卡前方序号
0):XXX
请输入就诊卡序号：0
成功
{'result': {'orderId': '22072652614341163', 'hint': '您好！感谢您选择江苏省中医院为您的健康护航。由于您是首次来我院就诊患者，为保障您的病历资料完整，请于就诊日当天，携带有效身份证件，提前到我院人工挂号/收费窗口进行身份认证，确认后请直接前往诊区候诊'}, 'timeTaken': 185, 'code': '0', 'message': '成功', 'respCode': '999002'}

```

2. 监控预约程序，可监控指定医生指定日期内是否有可预约时间，如果有则直接预约。预约后请及时付款确定挂号！程序每10S检测一次，预约后10分后再次预约，直至手动停止程序。运行效果如下。

```shell
   欢迎使用ddddocr，本项目专注带动行业内卷，个人博客:wenanzhe.com
   训练数据支持来源于:http://146.56.204.113:19199/preview
   爬虫框架feapder可快速一键接入，快速开启爬虫之旅：https://github.com/Boris-code/feapder
   初始化
   获取token成功
   请选择院区，输入院区前方序号
   0):江苏省中医院本部
   1):江苏省中医院紫东院区
   请输入院区序号：0
   请选择科室类别，输入科室类别前方序号
   0):名医
   1):内科
   2):外科
   3):妇儿科
   4):针推
   5):多学科联合门诊
   6):医技
   7):其他门诊
   请输入科室类别序号：3
   请选择科室，输入科室前方序号
   0):妇科
   1):儿科
   2):生殖医学科
   请输入科室序号：0
   请选择医生，输入医生前方序号
   0):任青玲
   1):周惠芳
   2):卢苏
   3):管群
   4):胡荣魁
   5):时燕萍
   6):刘琦
   7):施艳秋
   8):陆启滨
   9):钱菁
   10):夏亲华
   11):唐雪梅
   12):李健美
   13):江婉君
   14):何贵翔
   15):高月平
   16):顾俊杰
   17):李瑾
   18):王静
   19):陆葳
   20):许家莹
   21):陈赟
   22):周云
   23):仰晨
   24):池雷
   25):梁建宁
   26):陈聪
   27):吴维龙
   28):刘音吟
   29):柳静
   30):范欢欢
   31):王东红
   32):郭红玉
   33):王伟
   34):金晶
   35):张磊
   36):徐雯雯
   37):HPV疫苗接种咨询门诊
   38):复发性流产专病门诊(普号)
   39):妇科计划生育(普号)
   40):妇科(普号)
   41):宫颈病专病门诊(普号)
   42):宫内疾病专病门诊(普号)
   43):更年期综合症专病门诊(普号)
   44):卵巢早衰专病门诊(普号)
   45):慢性盆腔痛专病门诊(普号)
   46):青春期月经病专病门诊(普号)
   47):下生殖道疾病专病门诊(普号)
   请输入医生序号：0
   请选择日期，输入日期前方序号
   0):2022-07-26
   1):2022-07-27
   2):2022-07-28
   3):2022-07-29
   4):2022-08-01
   5):2022-08-03
   请输入日期序号：1
   没有可预约的时间,等待10S后再次检测
```

### api.py

项目接口文件，提供江苏省中医院的相关网络接口。文件中接口使用异常处理装饰器，出现网络异常或数据异常等待5S后重试三次。

接口类中每个函数基本都有注释，具体功能可以看文件注释。

#### schema.py

接口数据定义文件，该文件内定义了江苏省中医院的相关网络接口的数据模型。api.py文件内接口函数与schema.py文件内接口数据定义类相对应。



